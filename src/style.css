body {
  margin: 0;
  overflow: hidden;
  background-color: #000;
  color: #fff;
  font-family: sans-serif;
}

canvas {
  display: block;
}

/* UI Harmonization - Game Styling */

/* Common Panel Style */
.game-panel {
  background-color: rgba(0, 0, 0, 0.8);
  /* The "Nice Gray" Transparency */
  border-radius: 5px;
  padding: 5px 8px;
  color: white;
  font-family: monospace;
  margin-bottom: 5px;
  /* Spacing between panels */
  pointer-events: auto;
  /* Ensure panel captures clicks */
  transition: all 0.2s ease;
  z-index: 100;
  /* Ensure panels are above overlays when visible */
}

/* Panel Header/Title */
.panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 2px;
  margin-bottom: 4px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
  cursor: pointer;
  user-select: none;
}

.panel-header.collapsed {
  border-bottom: none;
  margin-bottom: 0;
  padding-bottom: 0;
}

.panel-title {
  color: #fff;
  font-weight: bold;
  font-size: 11px;
  letter-spacing: 0.5px;
}

.panel-toggle {
  color: #aaa;
  font-weight: bold;
  font-size: 12px;
}

/* Standard Game Button */
.game-btn {
  background-color: rgba(50, 50, 50, 0.8);
  border: 1px solid #555;
  color: #ccc;
  cursor: pointer;
  border-radius: 4px;
  padding: 6px 12px;
  font-family: monospace;
  font-size: 12px;
  transition: all 0.2s ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
}

.game-btn:hover {
  background-color: rgba(80, 80, 80, 0.9);
  color: white;
  border-color: #00aaff;
  box-shadow: 0 0 5px rgba(0, 170, 255, 0.3);
}

.game-btn:active {
  background-color: #00aaff;
  color: black;
  transform: translateY(1px);
}

/* Icon / Small Button (Time warp, Zoom) */
.game-btn-icon {
  min-width: 24px;
  height: 24px;
  padding: 0;
  /* Centered icon */
  font-size: 14px;
  border-radius: 3px;
  background-color: #333;
  /* Slightly darker default */
  display: flex;
  /* Enforce flexbox */
  align-items: center;
  justify-content: center;
  line-height: 1;
  /* Reset line-height */
}

/* Specific component overrides if needed */
/* Specific component overrides if needed */
.text-green {
  color: #00C851;
}

.text-yellow {
  color: #FFEB3B;
}

.text-muted {
  color: #aaa;
}

/* Modal Content Box */
.game-modal-content {
  background-color: rgba(0, 0, 0, 0.9);
  /* Harmonized with game-panel but slightly darker for focus */
  border: 2px solid #00aaff;
  border-radius: 8px;
  padding: 25px;
  color: white;
  font-family: monospace;
  box-shadow: 0 0 30px rgba(0, 170, 255, 0.5);
}

.game-modal-content h2,
.game-modal-content h3 {
  margin-top: 0;
  color: #00aaff;
  text-align: center;
  text-shadow: 0 0 10px rgba(0, 170, 255, 0.5);
}

/* =========================================
   THEMING SYSTEM
   ========================================= */

/* Default Theme (Standard) */
body.theme-standard .game-panel {
  display: block;
}

/* Sci-Fi Theme (Classic Cockpit) */
body.theme-scifi .game-panel {
  display: none !important;
}

body.theme-scifi .game-modal-content {
  display: block;
}

body.theme-scifi #cockpit-overlay {
  display: block;
  /* Show SciFi Overlay */
}

/* Apollo Theme */
body.theme-apollo .game-panel {
  display: none !important;
}

body.theme-apollo .game-modal-content {
  display: block;
}

body.theme-apollo #apollo-dashboard {
  display: flex;
  /* Show Apollo Dashboard */
}


/* --- Sci-Fi Overlay Container --- */
#cockpit-overlay {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  display: none;
  z-index: 10;
}

/* ... existing SciFi styles ... */

/* --- Apollo Dashboard --- */
#apollo-dashboard {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 220px;
  /* Fixed height for dashboard */
  background-image: url('apollo_metal.png');
  background-repeat: repeat;
  border-top: 4px solid #444;
  box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.5), 0 -5px 15px rgba(0, 0, 0, 0.5);
  display: none;
  /* Hidden by default */
  z-index: 20;
  pointer-events: auto;
  justify-content: space-between;
  padding: 10px 20px;
  box-sizing: border-box;
  font-family: 'Courier New', Courier, monospace;
  /* Retro font */
}

/* Dashboard Blocks */
.apollo-block {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 15px;
  background: rgba(0, 0, 0, 0.2);
  padding: 10px;
  border-radius: 5px;
  border: 1px solid #666;
}

/* Analog Gauge */
.apollo-gauge {
  width: 100px;
  height: 100px;
  background-image: url('gauge_face.png');
  background-size: cover;
  border-radius: 50%;
  position: relative;
  box-shadow: 0 0 5px rgba(0, 0, 0, 0.8);
  border: 4px solid #333;
}

.apollo-gauge::after {
  content: '';
  /* Shine reflection */
  position: absolute;
  top: 5%;
  left: 10%;
  width: 30%;
  height: 20%;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 50%;
}

.gauge-needle {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 45%;
  height: 2px;
  background: red;
  transform-origin: 0% 50%;
  /* Pivot at center */
  transform: rotate(-135deg);
  /* Start pos */
  transition: transform 0.1s linear;
  box-shadow: 1px 1px 2px black;
}

.gauge-label {
  position: absolute;
  bottom: 20%;
  width: 100%;
  text-align: center;
  color: #ccc;
  font-size: 10px;
  font-weight: bold;
  text-shadow: 1px 1px 0 #000;
}

/* Digital Readout (VFD Style) */
.apollo-vfd {
  background: #000;
  color: #4f4;
  /* Green VFD */
  font-family: monospace;
  padding: 5px 10px;
  border: 2px solid #555;
  border-radius: 2px;
  min-width: 80px;
  text-align: right;
  box-shadow: inset 0 0 5px rgba(0, 255, 0, 0.2);
}

.vfd-label {
  color: #aaa;
  font-size: 10px;
  margin-right: 5px;
  text-transform: uppercase;
}

/* Toggle Switches */
.apollo-switch-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 50px;
}

.apollo-switch {
  width: 20px;
  height: 40px;
  background: #ccc;
  border: 1px solid #555;
  border-radius: 2px;
  position: relative;
  cursor: pointer;
  margin-bottom: 5px;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
}

.apollo-switch.active {
  background: #888;
  /* Flipped state visual */
}

.switch-label {
  font-size: 9px;
  color: #ddd;
  text-align: center;
  line-height: 1;
}

/* Layout Specifics */
#apollo-navball-container {
  width: 160px;
  height: 160px;
  background: #000;
  border-radius: 50%;
  border: 4px solid #555;
  box-shadow: inset 0 0 10px #000;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  /* Clip canvas corners */
}

/* -------------------------------------------------------------------------- */
/*                               DRAGON THEME                                 */
/* -------------------------------------------------------------------------- */

body.theme-dragon {
  /* Deep space background feel */
  background-color: #0b0d17;
  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
  color: #ffffff;
  overflow: hidden;
  /* Prevent scrollbars from dashboard */
}

/* --- OVERLAY STRUCTURE --- */
#dragon-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  /* Let clicks pass through to game scene where no UI */
  z-index: 10;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  /* Dashboard at bottom */
}

/* Window Frame (Pillars) */
.dragon-pillar {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 120px;
  background: linear-gradient(90deg, #111 0%, #222 50%, #111 100%);
  box-shadow: inset 0 0 50px #000;
  z-index: 20;
}

.dragon-pillar.left {
  left: 0;
  transform: skewX(5deg);
  border-right: 2px solid #333;
}

.dragon-pillar.right {
  right: 0;
  transform: skewX(-5deg);
  border-left: 2px solid #333;
}

.dragon-frame-top {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 60px;
  background: linear-gradient(180deg, #050505 0%, rgba(5, 5, 5, 0) 100%);
  z-index: 15;
}

/* --- DASHBOARD CONSOLE --- */
#dragon-dashboard {
  height: 35vh;
  width: 100%;
  background: #111;
  border-top: 4px solid #333;
  display: flex;
  justify-content: space-around;
  align-items: center;
  padding: 20px;
  box-sizing: border-box;
  pointer-events: auto;
  /* Enable clicks on dashboard */

  /* 3D Perspective Look */
  transform-origin: bottom center;
  transform: perspective(1000px) rotateX(10deg);
  box-shadow: 0 -10px 50px rgba(0, 0, 0, 0.8);
  z-index: 20;
}

/* Screens */
.dragon-screen {
  position: relative;
  background: rgba(0, 20, 40, 0.6);
  border: 2px solid rgba(0, 150, 255, 0.4);
  border-radius: 12px;
  box-shadow:
    0 0 20px rgba(0, 150, 255, 0.2),
    inset 0 0 50px rgba(0, 0, 0, 0.8);
  overflow: hidden;
  /* Contain panels */
  backdrop-filter: blur(5px);
  display: flex;
  flex-direction: column;
}

#dragon-screen-left,
#dragon-screen-right {
  width: 25%;
  height: 90%;
  transform: rotateX(-5deg);
  /* Counter-rotate to face viewer */
}

#dragon-screen-center {
  width: 40%;
  height: 95%;
  background: rgba(0, 10, 20, 0.8);
  /* Darker center */
  border-color: rgba(0, 180, 255, 0.6);
  transform: translateZ(20px) rotateX(-5deg);
  /* Pop out slightly */
}

/* Screen Labels */
.screen-label {
  background: rgba(0, 150, 255, 0.1);
  color: #0af;
  font-size: 10px;
  text-align: center;
  padding: 4px;
  letter-spacing: 2px;
  border-bottom: 1px solid rgba(0, 150, 255, 0.3);
  text-shadow: 0 0 5px #0af;
}

.screen-content {
  flex: 1;
  position: relative;
  padding: 10px;
  overflow-y: auto;
  /* Allow scroll if needed */
}

/* Hide/Style Standard Scrollbars in screens */
.screen-content::-webkit-scrollbar {
  width: 4px;
}

.screen-content::-webkit-scrollbar-thumb {
  background: #0af;
}

/* --- ADAPT STANDARD PANELS FOR DRAGON --- */

/* Reset standard panel styles when inside Dragon */
#dragon-dashboard .game-panel {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  min-width: 100% !important;
  /* Fill width */
}

#dragon-dashboard .panel-header {
  background: rgba(0, 150, 255, 0.1) !important;
  border: 1px solid rgba(0, 150, 255, 0.3) !important;
  margin-bottom: 10px;
  /* Separator */
}

#dragon-dashboard .panel-title {
  font-size: 12px;
}

/* Adjust Navball in Dragon */
#dragon-dashboard #navball-canvas {
  /* Canvas specific overrides */
  border-radius: 50%;
  border: 2px solid #0af;
  box-shadow: 0 0 30px rgba(0, 150, 255, 0.4);
}

/* Glassmorphism Panels */
body.theme-dragon .game-panel,
body.theme-dragon #mission-controls-panel,
body.theme-dragon #rocket-info-panel,
body.theme-dragon #time-controls-panel,
body.theme-dragon #celestial-bodies-panel .game-panel {
  background: rgba(16, 20, 30, 0.65) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
  border: 1px solid rgba(100, 200, 255, 0.3) !important;
  border-radius: 6px !important;
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5), 0 0 10px rgba(0, 150, 255, 0.1) !important;
  color: #e0f0ff !important;
}

/* Panel Headers */
body.theme-dragon .panel-header {
  background: rgba(0, 100, 200, 0.2) !important;
  border-bottom: 1px solid rgba(100, 200, 255, 0.2) !important;
  border-radius: 6px 6px 0 0 !important;
}

body.theme-dragon .panel-title {
  text-transform: uppercase;
  letter-spacing: 1px;
  font-weight: 600;
  color: #0af;
  text-shadow: 0 0 5px rgba(0, 150, 255, 0.5);
}

/* Buttons */
body.theme-dragon .game-btn {
  background: rgba(0, 150, 255, 0.1) !important;
  border: 1px solid rgba(0, 150, 255, 0.4) !important;
  color: #fff !important;
  border-radius: 4px !important;
  transition: all 0.2s ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-size: 11px;
}

body.theme-dragon .game-btn:hover {
  background: rgba(0, 150, 255, 0.3) !important;
  border-color: #0af !important;
  box-shadow: 0 0 10px rgba(0, 150, 255, 0.5);
}

body.theme-dragon .game-btn:active {
  background: rgba(0, 150, 255, 0.5) !important;
}

/* Inputs & Selects */
body.theme-dragon select,
body.theme-dragon input {
  background: rgba(0, 0, 0, 0.5) !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
  color: #fff !important;
  border-radius: 4px;
}

/* Text Highlights */
body.theme-dragon strong,
body.theme-dragon b {
  color: #0af;
}

/* Navball */
body.theme-dragon #navball-container,
body.theme-dragon #navball-canvas {
  /* Add a subtle glow to the navball itself if possible via container */
  filter: drop-shadow(0 0 15px rgba(0, 150, 255, 0.3));
}